---
title: WordPress媒体库图片不显示问题的解决
id: 3847
date: 2020-08-10 07:49:45
categories:
  - [Debug]
  - [博客相关]
tags: ['WordPress', '数据库']
cover: 
disableNunjucks: true
---

先写一个相关的小插曲，今天上午起床后打开博客，发现导航菜单炸了：所有一级、二级菜单都变成了没有url的自定义链接，有些菜单的导航标签也消失了。

这个问题虽然令我诧异（WP群里的大佬们也都表示没见过这个问题，一度怀疑是主题bug），但好在十分容易解决，删除菜单重新添加一个就行了，我也没多想。


后来我打开媒体库，发现所有媒体图片都无法显示，而显示成一张默认图片：

![](https://blogfiles.oss.fyz666.xyz/png/5cfd4ad7-66e8-4f90-9647-e21f59ccc642.png)
不过原图片并没有删掉，通过图片链接访问完全没有问题。


突然想起昨天搞了一下数据库，会不会是这个原因呢，我一通仔细排查果然发现了端倪。


昨天在优化数据库时，看了[这篇文章](http://www.lanyingblog.com/blog/1095.html)


该文章表示`wp_postmeta`这张表可有可无，我就随手清空了一下，却不想这一清空后果相当严重，不仅导致导航菜单直接乱套，所有链接都没了，还导致媒体库图片的数据全部无法显示。经过很长时间的排查才发现是因为清了这张表，这张表一定不能乱清空！！！得谨慎啊。


找到问题以后，感觉基本没啥快捷的恢复方法了，因此我选择直接恢复服务器三天前的快照，不然重新传图片实在是太麻烦了。

最后，学到的教训：

- 对于自己不了解的操作，一定要谨慎操作！！！
- 操作数据库前，一定要备份！！！
